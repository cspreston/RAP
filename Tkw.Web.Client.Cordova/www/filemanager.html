<!DOCTYPE html>

<html class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Ready Action Plan - Site</title>

    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- BEGIN CORE CSS -->
    <link rel="stylesheet" href="Content/pleasure/css/style.css">
    <link rel="stylesheet" href="Content/pleasure/css/elements.css">
    <!-- END CORE CSS -->

    <link rel="stylesheet" href="Content/pleasure/css/blueimp-gallery.css">
    <link rel="stylesheet" href="Content/pleasure/css/bootstrap-image-gallery.css">

    <!-- BEGIN PLUGINS CSS -->
    <link rel="stylesheet" href="Content/pleasure/css/social.css">
    <!-- END PLUGINS CSS -->
    <!-- FIX PLUGINS -->
    <link rel="stylesheet" href="Content/pleasure/css/plugins.css">
    <!-- END FIX PLUGINS -->
    <!-- BEGIN SHORTCUT AND TOUCH ICONS -->
    <link rel="shortcut icon" href="Content/pleasure/images/favicon.ico">
    <link rel="apple-touch-icon" href="Content/pleasure/images/apple-touch-icon.png">
    <!-- END SHORTCUT AND TOUCH ICONS -->
    <!--Kendo styles-->
    <link rel="stylesheet" href="Content/kendo/kendo.common-material.min.css">
    <link rel="stylesheet" href="Content/kendo/kendo.rtl.min.css">
    <link rel="stylesheet" href="Content/kendo/kendo.dataviz.min.css">
    <link rel="stylesheet" href="Content/kendo/kendo.dataviz.default.min.css">
    <link rel="stylesheet" href="Content/kendo/kendo.material.mobile.min.css">
    <link rel="stylesheet" href="Content/kendo/kendo.material.min.css">
    <!-- Angular Material CSS now available via Google CDN; version 0.11.2 used here -->
    <link rel="stylesheet" href="scripts/angular-material.css">

    <!--Add jQuery-->
    <script src="scripts/jquery-2.1.1.js"></script>
    <script src="scripts/jqueryui-1.11.1.js"></script>
    <script src="Content/pleasure/js/global-vendors.js"></script>
    <script src="Content/pleasure/js/masonry.pkgd.min.js"></script>
    <script src="Content/pleasure/js/jquery.blueimp-gallery.js"></script>
    <script src="Content/pleasure/js/bootstrap-image-gallery.js"></script>
    <script src="Content/pleasure/js/user-pages.js"></script>
    <script src="Content/pleasure/js/pleasure.js"></script>
    <script src="Content/pleasure/js/form-tools.js"></script>
    <script src="Content/pleasure/js/layout.js"></script>
    <script src="Content/pleasure/js/modernizr.min.js"></script>
    <!--Add Angular js-->
    <script src="scripts/angular.js"></script>
    <script src="scripts/angular-ng-map.js"></script>
    <script src="scripts/angular-dragdrop.min.js"></script>
    <script src="scripts/angular-material.min.js"></script>
    <script src="scripts/angular-animate.min.js"></script>
    <script src="scripts/angular-aria.min.js"></script>
    <script src="scripts/sortable.js"></script>
    <!-- Angular Material Javascript now available via Goo  gle CDN; version 0.11.2 used here -->
    <!-- BEGIN GLOBAL AND THEME VENDORS-->
    <!-- BEGIN PLUGINS AREA -->
    <!-- END PLUGINS AREA -->
    <!-- PLUGINS INITIALIZATION AND SETTINGS -->
    <!--Add common application services-->
    <script src="scripts/TKWApp/common.js"></script>
    <script src="scripts/TKWApp/config/configuration.js"></script>
    <script src="scripts/TKWApp/hard-routing/application-routes.js"></script>
    <script src="scripts/TKWApp/data/data-filters.js"></script>
    <script src="scripts/TKWApp/data/data-store.js"></script>
    <script src="scripts/TKWApp/data/authentication.js"></script>
    <script src="scripts/TKWApp/services/file-uploader.js"></script>

    <!--Add angular files-->
    <!--Add Utils-->
    <script src="scripts/app/utils/rap-file-utils.js"></script>
    <script src="scripts/app/utils/image-utils.js"></script>
    <!--Add Models-->
    <script src="scripts/app/models/base-model.js"></script>
    <script src="scripts/app/models/file-upload-model.js"></script>
    <script src="scripts/app/models/building.js"></script>
    <script src="scripts/app/models/pricing-info.js"></script>
    <script src="scripts/app/models/contact-info.js"></script>

    <!--Add Controllers-->
    <script src="scripts/app/controllers/base-controller.js"></script>
    <script src="scripts/app/controllers/filemanager-controller.js"></script>
    <script src="scripts/app/controllers/search-controller.js"></script>

    <!--Add Angular app configuration-->
    <script src="scripts/app/angular-app-configuration.js"></script>
    <script src="Content/kendo/kendo.all.min.js"></script>

</head>

<body ng-app="RAPApp" ng-cloak ng-controller="FileManagerController">
    <div class="nav-bar-container">
        <!-- BEGIN ICONS -->
        <div class="nav-menu">
            <div class="hamburger">
                <span class="patty"></span>
                <span class="patty"></span>
                <span class="patty"></span>
                <span class="patty"></span>
                <span class="patty"></span>
                <span class="patty"></span>
            </div><!--.hamburger-->
        </div><!--.nav-menu-->

        <div class="nav-search">
            <span class="search"></span>
        </div><!--.nav-search-->
        <!-- END OF ICONS -->

        <div class="nav-bar-border"></div><!--.nav-bar-border-->
        <!-- BEGIN OVERLAY HELPERS -->
        <div class="overlay">
            <div class="starting-point">
                <span></span>
            </div><!--.starting-point-->
            <div class="logo">RAP</div><!--.logo-->
        </div><!--.overlay-->

        <div class="overlay-secondary"></div><!--.overlay-secondary-->
        <!-- END OF OVERLAY HELPERS -->

    </div><!--.nav-bar-container-->

    <div class="content file-manager" style="margin-left: 36px;">
        <div id="site-header" class="page-header full-content bg-blue parallax" style="overflow: hidden; margin-left:3px;">
            <div class="row">
                <div id="saveSuccess" class="toastr-notify btn-ripple" data-toastr-title="Info" data-toastr-notification="Successfully saved"
                     data-toastr-position="toast-bottom-right"
                     data-toastr-type="success">
                </div>
                <div id="saveFailure" class="toastr-notify btn-ripple" data-toastr-title="Info" data-toastr-notification="Failure while executing action"
                     data-toastr-position="toast-bottom-right"
                     data-toastr-type="error">
                </div>

                <div class="col-sm-6">
                    <h1>{{CurrentBuilding.Name}}</h1>
                </div>
                <!--.col-->
                <div class="col-sm-6">
                    <ol class="breadcrumb">
                        <li>
                            <a ng-href="{{getUrl('Dashboard')}}">Dashboard</a>
                        </li>
                        <li>
                            <a ng-href="{{getUrl('Site')+'?id='+CurrentBuilding.Id}}">Site Profile</a>
                        </li>
                        <li>
                            <a href="#" class="active">File Manager</a>
                        </li>
                    </ol>
                </div>
                <!--.col-->
            </div>
            <!--.row-->
        </div>

        <div id="fullcontainer">
            <div id="main" role="main" style="overflow:visible;">
                <div style="width:100%;display:inline-block;padding-bottom:5px; margin-top:-30px; height:100%" ng-show="isInRole">
                    <loading></loading>
                    <div class="row">
                        <div class="col-md-3">
                            <div id="treeview-sprites" kendo-tree-view="tree"
                                 k-data-source="treeData">
                                <span k-template class="rootfolder" id="{{dataItem.type}}_{{dataItem.id}}">
                                    <button class="btn-flat" title="{{dataItem.Name}}" ng-click='clickFolder(dataItem)'>{{dataItem.Name}} </button>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-9" style="border-left:ridge 2px #CEC6C6;" id="fldView">
                            <table class="table table-striped" ng-show="SelectedFolder!=null">
                                <thead>
                                    <tr>
                                        <th colspan="2" style="color:#005288 !important">
                                            <i class="fa fa-folder"></i>
                                            <span ng-show="SelectedFolder.ParentName!=null" ng-repeat="f in SelectedFolderParents">
                                                 / <a style="cursor:pointer" ng-click='clickFolderNav(f)'> {{f.Name}} </a>
                                            </span>
                                            <span>/ {{SelectedFolder.Name}}  </span>
                                        </th>
                                        <th style="float:right;">
                                            <button  class="btn btn-success btn-ripple pull-right" ng-show=" SelectedFolder.id!='root' || (SelectedFolder.Create)" ng-click="addFile()">
                                                Add file
                                            </button>
                                            <button  class="btn btn-success btn-ripple pull-right" ng-show=" SelectedFolder.id=='root' || (SelectedFolder.Create)"
                                                    ng-click="addFolder()">
                                                Create folder
                                            </button>

                                        </th>
                                    </tr>
                                    <tr>
                                        <th>Name</th>
                                        <th>Date</th>
                                        <th> </th>
                                    </tr>
                                    <tr ng-repeat="fi in SelectedFolder.items">
                                        <td>
                                           <span ng-show="fi.type>=2">{{fi.Name}}</span>
                                            <a ng-show="fi.type<2" style="cursor:pointer" ng-click='clickFolderDetail(fi)'>{{fi.Name}}</a>
                                        </td>
                                        <td>{{fi.CreatedDate| date : 'shortDate' }}</td>
                                        <td align="right">
                                            <button class="btn tool-btn" title="Permission" ng-show="fi.SetPermission" ng-click="viewItemPermission(fi)">
                                                <i class="fa fa-lock"></i>
                                            </button>
                                            <a class="btn tool-btn" ng-show="fi.type>1 && fi.Read" title="Save" ng-href="{{saveFile(fi)}}" download>
                                                <i class="fa fa-download"></i>
                                            </a>
                                           
                                            <button class="btn tool-btn" ng-show="fi.type<2 && fi.Delete" title="Remove folder" ng-click="removeFolder(fi)">
                                                <i class="fa fa-remove"></i>
                                            </button>
                                            <button class="btn tool-btn" ng-show="fi.type>=2 && fi.Delete" title="Remove file" ng-click="removeFile(fi)">
                                                <i class="fa fa-remove"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal scale fade in" id="tree_info_add_folder" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;z-index:999999;">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Create folder</h4>
                        </div>
                        <div class="modal-body">
                            <div class="inputer">
                                <div class="input-wrapper">
                                    <textarea class="form-control js-auto-size ng-pristine ng-untouched ng-valid" rows="1"
                                              placeholder="Enter folder name" style="height: 38px;" ng-model="FolderName"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-flat-primary btn-ripple" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-blue btn-ripple" ng-click="createFolder()" data-dismiss="modal">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal scale fade in" id="tree_info_add_file" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;z-index:999999;">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Add new file</h4>
                        </div>
                        <div class="modal-body">
                            <div class="inputer">
                                <div class="input-wrapper">
                                    <input type="file" id="fuFolderFile" />
                                    <div class="logger well well-sm" style="margin-top:10px;display:none;">
                                        <img id="fuFolderFilePrev" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-flat-primary btn-ripple" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-blue btn-ripple" ng-click="createFile()" data-dismiss="modal">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal scale fade in" id="tree_info_permission" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;z-index:999999;">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title">Change permissions for {{SelectedPermissionFile.Name}} </h2>
                        </div>
                        <div class="modal-body">
                            <div class="inputer">
                                <div class="input-wrapper">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Users</th>
                                                <th>Set permission</th>
                                                <th  ng-show="SelectedPermissionFile.type==0">Add folder / file</th>
                                                <th>Download</th>
                                                <th>Remove</th>
                                            </tr>
                                            <tr ng-repeat="fi in FolderPermissions">
                                                <td>{{fi.ActorName}}</td>
                                                <td>
                                                    <input type="checkbox" value="{{fi.SetPermission}}" id="{{fi.SetPermission}}" ng-model="fi.SetPermission">
                                                </td>
                                                <td  ng-show="SelectedPermissionFile.type==0">
                                                     <input type="checkbox" value="{{fi.Create}}" id="{{fi.Create}}" ng-model="fi.Create" >
                                                </td>
                                                <td>
                                                    <input type="checkbox" value="{{fi.Read}}" id="{{fi.Read}}" ng-model="fi.Read" >
                                                </td>
                                                <td>
                                                    <input type="checkbox" value="{{fi.Delete}}" id="{{fi.Delete}}" ng-model="fi.Delete" >
                                                </td>
                                                
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div>
                                <div class="checkboxer" ng-show="SelectedPermissionFile.type==0">
                                    <input type="checkbox"  value="Recursive" id="Recursive" ng-model="Recursive" >
                                    <label for="Recursive">Recursive</label>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-flat-primary btn-ripple" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-blue btn-ripple" ng-click="setItemPermission()" data-dismiss="modal">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="layer-container">
            <div class="menu-layer" ng-include="getUrl('AppMenu')">
            </div>
        </div>
        <div class="search-layer" ng-include="getUrl('Search')" ng-controller="SearchController">
        </div>

    </div>
    <!-- BEGIN INITIALIZATION-->
    <script>
        $(document).ready(function () {
            console.log("!!!");
            Pleasure.init();
            Layout.init();
            $("#fldView").css("height",$("#main").height()+60);
        });
        $(window).on('resize', function () {
            $("#fldView").css("height", $("#main").height());
        });
    </script>
    <!-- END INITIALIZATION-->
</body>

</html>
